language: perl
perl:
    - "5.24"
    - "5.22"
    - "5.20"
services:
    - postgresql
env:
  global:
    - PERL_CPANM_OPT="--notest --force --skip-satisfied"
    - MOJO_MODE=development
    - MOJO_CONFIG=rest_api.development.conf
install:
    - "cpanm --installdeps ."
before_script:
    - psql -c 'create database coding_test;' -U postgres
    - "perl rest_api.pl migrate"
script: "perl rest_api.pl test"
sudo: false
notifications:
    email: false

